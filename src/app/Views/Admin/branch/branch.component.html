<section id="content">
    <h4 class="fw-bold" [ngStyle]="{'color': isLightTheme ? '#b71c1c' : 'white'}">
        Branch Management
    </h4>  
    
    <div id="addBranchCard">
        <div class="container">
        <div class="row">
            <div>
                <!-- <button mat-button id="add-row" > <i class="bi bi-plus-square"></i> Add Branch</button> -->
                <button id="add-row"><i class="bi bi-plus-square"></i> Add Branch</button>
            </div>            
            <div class=" branch-grid">
                <mat-card class=" example-card branch-card" appearance="outlined" *ngFor="let branch of branches">
                    <mat-card-header>
                      <div mat-card-avatar class="example-header-image"></div>
                      <mat-card-title>{{branch.branchName}}</mat-card-title>
                      <mat-card-subtitle>Branch Id: {{branch.branchId}}</mat-card-subtitle>
                    </mat-card-header>
                    <!-- <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu"> -->
                    <mat-card-content>
                      <p>
                        Admin: {{ branch.branchAdminId == "0"? 'No Admin' : branch.adminName +" [ ID: " + branch.branchAdminId + " ]"}} 
                      </p>
                      <p>Active Members: {{branch.activeMembers}}</p>
                      <p>Leaved Members: {{branch.leavedMembers}}</p>
                       <p>Address:</p>
                      <p>
                          {{branch.address?.street}}, 
                          {{branch.address?.city}}, 
                          {{branch.address?.province}}, 
                          {{branch.address?.country}}
                      </p>
                    </mat-card-content>
                    <mat-card-actions>
                      <button  mat-button (click)="onEdit(branch.branchId)" > <i class="bi bi-pencil"></i></button>
                      <button mat-button (click)="openModal(template1, branch.branchId)"><i class="bi bi-trash"></i></button>
                    </mat-card-actions>
                  </mat-card>
                <!-- <div class="branch-grid">
                    
                    <div *ngFor="let branch of branches" class="branch-card">
                        <h4 class="branch-title">{{branch.branchName}}</h4>
                        <p><strong>Branch Id:</strong> {{branch.branchId}}</p>
                        <p><strong>Admin:</strong> {{ branch.branchAdminId == "0"? 'No Admin' : branch.adminName +" [ ID: " + branch.branchAdminId + " ]"}}</p>
                        <p><strong>ActiveMembers:</strong> {{branch.activeMembers}}</p>
                        <p><strong>LeavedMembers:</strong> {{branch.leavedMembers}}</p>
                         <p><strong>Address:</strong></p>
                        <p>
                            {{branch.address?.street}}, 
                            {{branch.address?.city}}, 
                            {{branch.address?.province}}, 
                            {{branch.address?.country}}
                        </p>
                        <div class="actions">
                            <button type="button" class="btn btn-primary me-3 btn-sm" (click)="onEdit(branch.branchId)">
                                <i class="bi bi-pencil"></i> Edit
                            </button>
                            <button type="button" class="btn btn-danger btn-sm" (click)="openModal(template1, branch.branchId)">
                                <i class="bi bi-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
    </div>
</section>

<ng-template #template1>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Delete Confirmation </h4>
        <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
            <span aria-hidden="true" class="visually-hidden">&times;</span>
        </button>
    </div>
    <div class="modal-body text-center">
        <p>Do you want to delete this branch?</p>
        <button type="button" class="btn btn-default" (click)="confirm()">Yes</button>
        <button type="button" class="btn btn-primary" (click)="decline()">No</button>
    </div>
</ng-template>
